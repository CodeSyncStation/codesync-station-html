"use client"
import Avatar from "@/Components/ui/Avatar";
import Spinner from "@/Components/ui/Spinner";
import { useGetMyCoursesQuery } from "@/redux/api/courses/coursesSlice";
import { usePostFlagUserMutation } from "@/redux/api/flaggedUser/flaggedSlice";
import { useGetMoreQnaQuery } from "@/redux/api/qna/qnaSlice";
import { useGetSingleUserQuery, useUpdateUserMutation } from "@/redux/api/user/userSlice";
import moment from "moment";
import Link from "next/link";
import { useState } from "react";
import { Button, Modal } from "react-bootstrap";
import toast from "react-hot-toast";
import EditModal from "./EditModal";

const baseUrl = process.env.NEXT_PUBLIC_APIHOST;
const socialsIcons = [
  <>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-facebook" viewBox="0 0 16 16">
      <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951" />
    </svg>
  </>,
  <>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-twitter-x" viewBox="0 0 16 16">
      <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z" />
    </svg>
  </>,
  <>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-linkedin" viewBox="0 0 16 16">
      <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z" />
    </svg>
  </>,
  <>
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-github" viewBox="0 0 16 16">
      <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8" />
    </svg>
  </>,
]

export default function CourseSummary({ params }) {
  const { isLoading, isError, error, data: student } = useGetSingleUserQuery({ iri: params.studentId })
  const [show, setShow] = useState(false)
  const { isLoading: loadingQnaCount, data: qnaCount } = useGetMoreQnaQuery({
    author: `/api/users/${params.studentId}`
  })
  const { data: myCourses } = useGetMyCoursesQuery({
    ownerId: params.studentId
  })
  const [patchUser] = useUpdateUserMutation()
  const [showWarning, setShowWarning] = useState(false)
  const [flagUser] = usePostFlagUserMutation()

  const handleFlagUser = async () => {
    if(myCourses["hydra:member"].length <= 0){
      toast.error("You cannot flag a student who is not enrolled in any courses")
      return
    }
    try {
      const flagData = {
        "reason": "manual",
        "createdAt": new Date().toISOString(),
        "status": true,
        "course": myCourses["hydra:member"].length > 0 ? myCourses["hydra:member"][0]?.course["@id"]: `/api/courses/1`,
        "student": `/api/users/${params.studentId}`
      }
      await flagUser({data: flagData}).unwrap()
      await patchUser({iri:`/api/users/${params.studentId}`, data: {flagged: true}}).unwrap()
      setShowWarning(false)
      toast.success("User flagged successfully")
    } catch (error) {
      console.error(error)
      toast.error("Failed to flag user")
    }
    finally {
      setShowWarning(false)
    }
  }

  const handleWarning = () => {
    setShowWarning(true)
  }

  if (isLoading && !isError) {
    return <Spinner />
  } else if (isError && !isLoading) {
    return <p className="text-warning">{error.message}</p>
  } else if (!isLoading && student) {
    const { id, fullName, phone, email, roles, registeredAt, profileImage, social, occupation, bio, cart, isMod, takenCourses, courseStatus, flagged } = student || {};
    return (
      <>
        <Modal show={showWarning} onHide={() => setShowWarning(false)} centered>
          <Modal.Header className="px-0">
            <Modal.Title>Flag student</Modal.Title>
          </Modal.Header>
          <Modal.Body>
            Are you sure you want to <strong>Flag</strong> this student?
          </Modal.Body>
          <Modal.Footer className="mx-3 px-0">
            <Button variant="outline-secondary" onClick={() => setShowWarning(false)}>
              No
            </Button>
            <Button onClick={handleFlagUser} variant="danger">
              Yes
            </Button>
          </Modal.Footer>
        </Modal>

        <EditModal show={show} setShow={setShow} user={student} />
        <div className="student-info flex-between">
          <div className="d-flex align-items-center gap-2 position-relative">
            <div className="course-image-container position-relative">
              <figure className="author-img overflow-visible">
                {
                  flagged && <span className="flag-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 11 11" fill="none">
                      <path d="M7.97603 0.945218C8.05365 0.975591 8.11102 1.04264 8.12902 1.12402L8.93917 4.78546C8.96126 4.88527 8.92035 4.98847 8.83588 5.04605L8.69508 4.83947C8.83588 5.04605 8.83588 5.04605 8.83588 5.04605L8.83473 5.04683L8.83198 5.04869L8.8218 5.05555C8.81299 5.06148 8.80016 5.07005 8.78369 5.08093C8.75076 5.10269 8.70322 5.13375 8.64399 5.17142C8.52568 5.24668 8.36005 5.34879 8.17072 5.45626C7.79977 5.66682 7.31026 5.91402 6.90434 6.00384C6.49098 6.0953 6.11812 6.03403 5.79423 5.98081L5.77943 5.97838C5.44249 5.92306 5.15616 5.87855 4.84355 5.94772C4.50174 6.02335 4.06845 6.23663 3.70518 6.44412C3.52704 6.54588 3.37185 6.64265 3.26126 6.71395C3.24888 6.72194 3.23706 6.7296 3.22584 6.7369L3.89102 9.74314C3.92085 9.87795 3.83574 10.0114 3.70093 10.0412C3.56612 10.0711 3.43265 9.98597 3.40282 9.85116L1.78253 2.52828C1.7527 2.39347 1.8378 2.26 1.97261 2.23017C2.10742 2.20034 2.24089 2.28545 2.27072 2.42026L2.30121 2.55805C2.40304 2.495 2.52509 2.42167 2.659 2.34566C3.02995 2.13511 3.51946 1.88791 3.92538 1.79809C4.33583 1.70727 4.69925 1.76867 5.01688 1.82234C5.02461 1.82364 5.03232 1.82494 5.03999 1.82624C5.37055 1.88199 5.65801 1.92681 5.98617 1.8542C6.32798 1.77857 6.76127 1.5653 7.12454 1.3578C7.30268 1.25605 7.45787 1.15928 7.56846 1.08798C7.62368 1.05237 7.66761 1.02323 7.69753 1.00313C7.71248 0.993085 7.72392 0.985308 7.7315 0.980125L7.73994 0.974338L7.7419 0.97298L7.74232 0.972688" fill="#FF0000" />
                    </svg>
                  </span>
                }
                {
                  profileImage && profileImage.includes("/")
                    ? <img className="author-img" src={baseUrl + profileImage} alt="" />
                    : <Avatar />
                }

              </figure>
            </div>
            <h3 className="student-name mb-0">{fullName}</h3>
            <button onClick={() => setShow(true)} className="icon tooltip-container">
              <span className="tooltiptext">Edit Student</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M14.3536 4.35355L8.35355 10.3536C8.25979 10.4473 8.13261 10.5 8 10.5H6C5.72386 10.5 5.5 10.2761 5.5 10V8C5.5 7.86739 5.55268 7.74021 5.64645 7.64645L11.6464 1.64645C11.7402 1.55268 11.8674 1.5 12 1.5C12.1326 1.5 12.2598 1.55268 12.3536 1.64645L14.3536 3.64645C14.5488 3.84171 14.5488 4.15829 14.3536 4.35355ZM12 2.70711L13.2929 4L7.79289 9.5H6.5V8.20711L12 2.70711Z" fill="#1E293B" />
                <path d="M12.1463 5.8534C12.2401 5.94716 12.3674 6 12.5 6C12.5086 6 12.5173 5.99978 12.5259 5.99933C12.6494 5.99293 12.7661 5.941 12.8536 5.85355C12.9473 5.75979 13 5.63261 13 5.5C13 5.36739 12.9473 5.24021 12.8536 5.14645L10.8536 3.14645C10.7598 3.05268 10.6326 3 10.5 3C10.3674 3 10.2402 3.05268 10.1464 3.14645C10.0527 3.24021 10 3.36739 10 3.5C10 3.63261 10.0527 3.75979 10.1464 3.85355L12.1463 5.8534Z" fill="#1E293B" />
                <path d="M3 3H8.5C8.77614 3 9 2.77614 9 2.5C9 2.22386 8.77614 2 8.5 2H3C2.58579 2 2.29289 2.29289 2.29289 2.29289C2 2.58579 2 3 2 3V13C2 13.4142 2.29289 13.7071 2.29289 13.7071C2.58579 14 3 14 3 14H13C13.4142 14 13.7071 13.7071 13.7071 13.7071C14 13.4142 14 13 14 13V7.5C14 7.22386 13.7761 7 13.5 7C13.2239 7 13 7.22386 13 7.5V13H3V3Z" fill="#1E293B" />
              </svg>
            </button>
            {!flagged && <button onClick={handleWarning} className="tooltip-container">
              <span className="tooltiptext">Flag Student</span>
              <span className="icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 11 11" fill="none">
                  <path d="M7.97603 0.945218C8.05365 0.975591 8.11102 1.04264 8.12902 1.12402L8.93917 4.78546C8.96126 4.88527 8.92035 4.98847 8.83588 5.04605L8.69508 4.83947C8.83588 5.04605 8.83588 5.04605 8.83588 5.04605L8.83473 5.04683L8.83198 5.04869L8.8218 5.05555C8.81299 5.06148 8.80016 5.07005 8.78369 5.08093C8.75076 5.10269 8.70322 5.13375 8.64399 5.17142C8.52568 5.24668 8.36005 5.34879 8.17072 5.45626C7.79977 5.66682 7.31026 5.91402 6.90434 6.00384C6.49098 6.0953 6.11812 6.03403 5.79423 5.98081L5.77943 5.97838C5.44249 5.92306 5.15616 5.87855 4.84355 5.94772C4.50174 6.02335 4.06845 6.23663 3.70518 6.44412C3.52704 6.54588 3.37185 6.64265 3.26126 6.71395C3.24888 6.72194 3.23706 6.7296 3.22584 6.7369L3.89102 9.74314C3.92085 9.87795 3.83574 10.0114 3.70093 10.0412C3.56612 10.0711 3.43265 9.98597 3.40282 9.85116L1.78253 2.52828C1.7527 2.39347 1.8378 2.26 1.97261 2.23017C2.10742 2.20034 2.24089 2.28545 2.27072 2.42026L2.30121 2.55805C2.40304 2.495 2.52509 2.42167 2.659 2.34566C3.02995 2.13511 3.51946 1.88791 3.92538 1.79809C4.33583 1.70727 4.69925 1.76867 5.01688 1.82234C5.02461 1.82364 5.03232 1.82494 5.03999 1.82624C5.37055 1.88199 5.65801 1.92681 5.98617 1.8542C6.32798 1.77857 6.76127 1.5653 7.12454 1.3578C7.30268 1.25605 7.45787 1.15928 7.56846 1.08798C7.62368 1.05237 7.66761 1.02323 7.69753 1.00313C7.71248 0.993085 7.72392 0.985308 7.7315 0.980125L7.73994 0.974338L7.7419 0.97298L7.74232 0.972688" fill="#FF0000" />
                </svg>
              </span>
            </button>}
          </div>
          <div className="d-flex gap-3">
            <div className="email d-flex">
              <span className="social-icon-wrapper">
                {
                  social.map((obj, ind) => <Link
                    key={obj["id"]}
                    href={obj?.link || "#"}
                    target={obj?.link ? "_blank" : "_self"}
                    className="social-icon"
                  >
                    {socialsIcons[ind]}
                  </Link>)
                }
              </span>
              <span className="icon pe-2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                >
                  <path
                    d="M0 4C0 2.89543 0.895431 2 2 2H14C15.1046 2 16 2.89543 16 4V12C16 13.1046 15.1046 14 14 14H2C0.895431 14 0 13.1046 0 12V4ZM2 3C1.44772 3 1 3.44772 1 4V4.2169L8 8.4169L15 4.2169V4C15 3.44772 14.5523 3 14 3H2ZM15 5.3831L10.2919 8.20794L15 11.1052V5.3831ZM14.9662 12.2586L9.32583 8.7876L8 9.5831L6.67417 8.7876L1.03376 12.2586C1.14774 12.6855 1.53715 13 2 13H14C14.4628 13 14.8523 12.6855 14.9662 12.2586ZM1 11.1052L5.70808 8.20794L1 5.3831V11.1052Z"
                    fill="#1E293B"
                  />
                </svg>
              </span>
              {email}
            </div>
            <div className="date">
              <span className="icon pe-2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                  fill="none"
                >
                  <path
                    d="M10.8536 7.14645C11.0488 7.34171 11.0488 7.65829 10.8536 7.85355L7.85355 10.8536C7.75979 10.9473 7.63261 11 7.5 11C7.36739 11 7.24021 10.9473 7.14645 10.8536L5.64645 9.35355C5.45118 9.15829 5.45118 8.84171 5.64645 8.64645C5.84171 8.45118 6.15829 8.45118 6.35355 8.64645L7.5 9.79289L10.1464 7.14645C10.3417 6.95118 10.6583 6.95118 10.8536 7.14645Z"
                    fill="#1E293B"
                  />
                  <path
                    d="M3.5 0C3.77614 0 4 0.223858 4 0.5V1H12V0.5C12 0.223858 12.2239 0 12.5 0C12.7761 0 13 0.223858 13 0.5V1H14C15.1046 1 16 1.89543 16 3V14C16 15.1046 15.1046 16 14 16H2C0.895431 16 0 15.1046 0 14V3C0 1.89543 0.895431 1 2 1H3V0.5C3 0.223858 3.22386 0 3.5 0ZM1 4V14C1 14.5523 1.44772 15 2 15H14C14.5523 15 15 14.5523 15 14V4H1Z"
                    fill="#1E293B"
                  />
                </svg>
              </span>
              {moment(registeredAt).format("MMM D, YYYY")}
            </div>
          </div>
        </div>
        <div className="student-summary justify-content-between">
          <div className="summary-card">
            <div>
              <h3 className="title">{takenCourses}</h3>
              <p className="des">enrolled courses</p>
            </div>
            <span className="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="36"
                height="36"
                viewBox="0 0 36 36"
                fill="none"
              >
                <path
                  d="M30.375 2.25H5.625C3.76104 2.25 2.25 3.76104 2.25 5.625V21.375C2.25 23.239 3.76104 24.75 5.625 24.75H30.375C32.239 24.75 33.75 23.239 33.75 21.375V5.625C33.75 3.76104 32.239 2.25 30.375 2.25Z"
                  fill="#7B61FF"
                />
                <path
                  d="M32.625 29.25H3.375C3.07663 29.25 2.79048 29.3685 2.5795 29.5795C2.36853 29.7905 2.25 30.0766 2.25 30.375C2.25 30.6734 2.36853 30.9595 2.5795 31.1705C2.79048 31.3815 3.07663 31.5 3.375 31.5H32.625C32.9234 31.5 33.2095 31.3815 33.4205 31.1705C33.6315 30.9595 33.75 30.6734 33.75 30.375C33.75 30.0766 33.6315 29.7905 33.4205 29.5795C33.2095 29.3685 32.9234 29.25 32.625 29.25Z"
                  fill="#D5EAF7"
                />
                <path
                  d="M7.875 33.75C9.73896 33.75 11.25 32.239 11.25 30.375C11.25 28.511 9.73896 27 7.875 27C6.01104 27 4.5 28.511 4.5 30.375C4.5 32.239 6.01104 33.75 7.875 33.75Z"
                  fill="#B5D4E5"
                />
                <path
                  d="M22.4907 11.5866L16.9343 8.14968C16.5935 7.93918 16.2027 7.82348 15.8022 7.81453C15.4018 7.80557 15.0062 7.90369 14.6563 8.09875C14.3064 8.29381 14.015 8.57874 13.8121 8.9241C13.6091 9.26946 13.5021 9.66274 13.502 10.0633V16.9371C13.5028 17.5332 13.7401 18.1047 14.1616 18.5263C14.5832 18.9478 15.1547 19.185 15.7508 19.1859C16.1626 19.1859 16.5732 19.0734 16.9343 18.8507L22.4907 15.4127C23.1578 14.9998 23.5561 14.2843 23.5561 13.4991C23.5561 12.7138 23.1578 11.9994 22.4896 11.5854L22.4907 11.5866Z"
                  fill="#EAF6FD"
                />
              </svg>
            </span>
          </div>
          <div className="summary-card">
            <div>
              <h3 className="title">{courseStatus?.completed}</h3>
              <p className="des">Completed courses</p>
            </div>
            <span className="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="36"
                height="36"
                viewBox="0 0 36 36"
                fill="none"
              >
                <path
                  d="M18 33C26.2843 33 33 26.2843 33 18C33 9.71573 26.2843 3 18 3C9.71573 3 3 9.71573 3 18C3 26.2843 9.71573 33 18 33Z"
                  fill="#CACCFF"
                />
                <path
                  d="M13.6262 26C13.3316 26.0012 13.0398 25.9423 12.7683 25.827C12.4967 25.7116 12.251 25.5421 12.0458 25.3287L6.658 19.8856C6.44949 19.6764 6.284 19.4277 6.17107 19.1537C6.05814 18.8797 6 18.5858 6 18.2889C6 17.9921 6.05814 17.6982 6.17107 17.4242C6.284 17.1502 6.44949 16.9014 6.658 16.6923C6.86376 16.4794 7.10957 16.3103 7.38098 16.1948C7.65239 16.0793 7.94391 16.0198 8.23841 16.0198C8.53291 16.0198 8.82444 16.0793 9.09585 16.1948C9.36726 16.3103 9.61307 16.4794 9.81883 16.6923L13.6262 20.575L28.2091 6.65885C28.6325 6.23669 29.2035 6 29.7985 6C30.3934 6 30.9644 6.23669 31.3878 6.65885C31.5922 6.87621 31.7514 7.13263 31.8563 7.41305C31.9612 7.69347 32.0095 7.99223 31.9985 8.29178C31.9787 8.89032 31.7272 9.4571 31.2981 9.87028L15.1348 25.2924C14.739 25.7132 14.1997 25.9661 13.6262 26Z"
                  fill="#7B61FF"
                />
              </svg>
            </span>
          </div>
          <div className="summary-card">
            <div>
              <h3 className="title">{courseStatus?.ongoing}</h3>
              <p className="des">In progress course</p>
            </div>
            <span className="icon">
              <svg
                width="36"
                height="36"
                viewBox="0 0 36 36"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_1_7185)">
                  <path
                    d="M18 36C27.9411 36 36 27.9411 36 18C36 8.05887 27.9411 0 18 0C8.05887 0 0 8.05887 0 18C0 27.9411 8.05887 36 18 36Z"
                    fill="#B180FF"
                  />
                  <path
                    d="M35.9997 17.9998C35.9997 17.162 35.9424 16.3376 35.8316 15.5302L28.192 7.89062L23.5392 12.2504L27.4487 16.126L26.1443 16.8822L20.361 11.0413L15.7701 15.4679L20.4834 20.164L18.2072 21.4835L12.8269 16.1032L8.13898 20.4208L12.5145 24.7836L7.61719 27.6226L15.8697 35.8751C16.5766 35.9583 17.2879 36 17.9997 35.9998C27.9408 35.9998 35.9997 27.9409 35.9997 17.9998Z"
                    fill="#9A4DFF"
                  />
                  <path
                    d="M25.7976 13.1864C27.5594 13.1864 28.9877 11.7582 28.9877 9.9963C28.9877 8.23443 27.5594 6.80615 25.7976 6.80615C24.0357 6.80615 22.6074 8.23443 22.6074 9.9963C22.6074 11.7582 24.0357 13.1864 25.7976 13.1864Z"
                    fill="#FDBA12"
                  />
                  <path
                    d="M27.2448 11.4494C28.0463 10.6479 28.0463 9.34824 27.2448 8.54667C26.4432 7.74509 25.1436 7.74509 24.342 8.54667C23.5404 9.34824 23.5404 10.6479 24.342 11.4494C25.1436 12.251 26.4432 12.251 27.2448 11.4494Z"
                    fill="#FFA300"
                  />
                  <path
                    d="M18.0007 9.99609C16.2388 9.99609 14.8105 11.4244 14.8105 13.1862C14.8105 14.9481 16.2388 16.3764 18.0007 16.3764C18.0238 16.3764 18.0467 16.3751 18.0697 16.3746V9.99785C18.0467 9.99736 18.0238 9.99609 18.0007 9.99609Z"
                    fill="#FFCE00"
                  />
                  <path
                    d="M18 9.99609V16.3764C19.7619 16.3764 21.1901 14.9481 21.1901 13.1862C21.1901 11.4244 19.7619 9.99609 18 9.99609Z"
                    fill="#FDBA12"
                  />
                  <path
                    d="M17.9998 11.1338C16.8663 11.1338 15.9473 12.0528 15.9473 13.1864C15.9473 14.3199 16.8663 15.2389 17.9998 15.2389C18.023 15.2389 18.0459 15.2379 18.0689 15.2372V11.1355C18.0459 11.1348 18.023 11.1338 17.9998 11.1338Z"
                    fill="#FDBA12"
                  />
                  <path
                    d="M18 11.1338V15.2389C19.1336 15.2389 20.0526 14.3199 20.0526 13.1864C20.0526 12.0527 19.1336 11.1338 18 11.1338Z"
                    fill="#FFA300"
                  />
                  <path
                    d="M10.3855 21.3461C12.1473 21.3461 13.5756 19.9178 13.5756 18.156C13.5756 16.3941 12.1473 14.9658 10.3855 14.9658C8.62359 14.9658 7.19531 16.3941 7.19531 18.156C7.19531 19.9178 8.62359 21.3461 10.3855 21.3461Z"
                    fill="#FFCE00"
                  />
                  <path
                    d="M10.3865 20.2086C11.5201 20.2086 12.4391 19.2897 12.4391 18.1561C12.4391 17.0225 11.5201 16.1035 10.3865 16.1035C9.25295 16.1035 8.33398 17.0225 8.33398 18.1561C8.33398 19.2897 9.25295 20.2086 10.3865 20.2086Z"
                    fill="#FDBA12"
                  />
                  <path
                    d="M14.8286 18.1821V22.3839H7.61719V27.6231H18.0688V18.1821H14.8286Z"
                    fill="white"
                  />
                  <path
                    d="M30.0698 14.3203H22.0399V18.1819H17.9996L17.9746 27.6228H30.0698V14.3203Z"
                    fill="#E9EDF5"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_1_7185">
                    <rect width="36" height="36" fill="white" />
                  </clipPath>
                </defs>
              </svg>
            </span>
          </div>
          <div className="summary-card">
            <div>
              <h3 className="title">{!loadingQnaCount && qnaCount["hydra:member"].length}</h3>
              <p className="des">Question</p>
            </div>
            <span className="icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="36"
                height="36"
                viewBox="0 0 36 36"
                fill="none"
              >
                <path
                  d="M34.877 7.87939V23.6294C34.877 25.0356 34.4495 26.3406 33.6957 27.4206C33.08 28.3314 32.2504 29.0774 31.2796 29.5932C30.3088 30.109 29.2263 30.3789 28.127 30.3794H24.3132C23.9412 30.3752 23.5741 30.4647 23.2457 30.6397C22.9174 30.8146 22.6384 31.0695 22.4345 31.3806L21.7482 32.4156C21.3369 33.0322 20.7798 33.5377 20.1263 33.8873C19.4728 34.2369 18.7431 34.4198 18.002 34.4198C17.2608 34.4198 16.5311 34.2369 15.8776 33.8873C15.2241 33.5377 14.667 33.0322 14.2557 32.4156L13.5582 31.3806C13.3545 31.0718 13.0772 30.8185 12.7511 30.6437C12.4251 30.4689 12.0606 30.3781 11.6907 30.3794H7.87695C4.1532 30.3794 1.12695 27.3419 1.12695 23.6294V7.87939C1.12695 4.15564 4.1532 1.12939 7.87695 1.12939H28.127C31.8507 1.12939 34.877 4.15564 34.877 7.87939Z"
                  fill="#9757FF"
                />
                <path
                  d="M18 26.1665C18.6213 26.1665 19.125 25.6628 19.125 25.0415C19.125 24.4202 18.6213 23.9165 18 23.9165C17.3787 23.9165 16.875 24.4202 16.875 25.0415C16.875 25.6628 17.3787 26.1665 18 26.1665Z"
                  fill="white"
                />
                <path
                  d="M18.1088 22.1588C17.4225 22.1588 16.8668 21.5446 16.9916 20.8696C17.3426 18.9762 18.4564 17.3258 20.0764 16.373C21.2374 15.6901 22.152 14.5966 22.4108 13.2747C22.5747 12.4684 22.5146 11.6326 22.2369 10.8581C21.9592 10.0836 21.4746 9.40002 20.8358 8.88158C19.7558 8.00408 18.3923 7.68458 16.9939 7.98383C16.1359 8.16639 15.3521 8.60137 14.7433 9.23287C14.1344 9.86436 13.7284 10.6635 13.5773 11.5276C13.4314 12.3003 13.4883 13.0976 13.7426 13.8417C13.9193 14.3525 13.7325 14.9138 13.269 15.1906C12.6716 15.5461 11.8706 15.2907 11.6389 14.6348C11.0776 13.0255 11.1285 11.2658 11.7818 9.69158C12.5018 7.93658 14.0048 6.5652 15.8093 5.97795C18.075 5.24108 20.4746 5.68883 22.2555 7.1367C23.1748 7.88226 23.8818 8.8566 24.3053 9.96184C24.7289 11.0671 24.8542 12.2643 24.6686 13.4333C24.3503 15.5078 22.9766 17.2505 21.18 18.3361C20.1664 18.9481 19.4621 19.9966 19.218 21.2093C19.1089 21.7527 18.6623 22.1588 18.1088 22.1588Z"
                  fill="white"
                />
                <path
                  d="M28.125 33.75C31.2316 33.75 33.75 31.2316 33.75 28.125C33.75 25.0184 31.2316 22.5 28.125 22.5C25.0184 22.5 22.5 25.0184 22.5 28.125C22.5 31.2316 25.0184 33.75 28.125 33.75Z"
                  fill="#F8B4FD"
                />
                <path
                  d="M33.6957 27.4206C33.08 28.3314 32.2504 29.0774 31.2796 29.5932C30.3088 30.109 29.2263 30.3789 28.127 30.3794H24.3132C23.897 30.3794 23.4807 30.4919 23.132 30.7056C22.727 29.9406 22.502 29.0631 22.502 28.1294C22.502 25.0131 25.022 22.5044 28.127 22.5044C30.9957 22.5044 33.3582 24.6419 33.6957 27.4206Z"
                  fill="#5900F6"
                />
              </svg>
            </span>
          </div>
        </div>
      </>
    )
  }

}